import React, { useState } from 'react';
import { Transfer, Button, Space } from 'antd';
import 'antd/dist/reset.css'; // Import Ant Design styles

const App = () => {
  const [mockData, setMockData] = useState(
    Array.from({ length: 20 }, (_, i) => ({
      key: i.toString(),
      title: `Item ${i + 1}`,
      description: `Description ${i + 1}`,
    }))
  );

  const [targetKeys, setTargetKeys] = useState([]);

  const handleChange = (nextTargetKeys) => {
    setTargetKeys(nextTargetKeys);
  };

  const handleSort = (direction) => {
    setTargetKeys((prevTargetKeys) => {
      const newTargetKeys = [...prevTargetKeys];
      const itemIndex = prevTargetKeys.findIndex((key) => key === newTargetKeys[newTargetKeys.length - 1]);

      if (itemIndex === -1) return prevTargetKeys; // Item not found

      const item = newTargetKeys.splice(itemIndex, 1)[0];

      if (direction === 'up') {
        if (itemIndex > 0) {
          newTargetKeys.splice(itemIndex - 1, 0, item);
        }
      } else if (direction === 'down') {
        if (itemIndex < newTargetKeys.length - 1) {
          newTargetKeys.splice(itemIndex + 1, 0, item);
        }
      }

      return newTargetKeys;
    });
  };

  const renderFooter = (props) => (
    <div style={{ marginTop: 16 }}>
      <Space>
        <Button
          onClick={() => handleSort('up')}
          disabled={targetKeys.length === 0}
        >
          Move Up
        </Button>
        <Button
          onClick={() => handleSort('down')}
          disabled={targetKeys.length === 0}
        >
          Move Down
        </Button>
      </Space>
    </div>
  );

  return (
    <Transfer
      dataSource={mockData}
      showSearch
      listStyle={{
        width: 250,
        height: 300,
      }}
      targetKeys={targetKeys}
      onChange={handleChange}
      render={(item) => item.title}
      footer={renderFooter}
    />
  );
};

export default App;
